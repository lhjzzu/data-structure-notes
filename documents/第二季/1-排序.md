##æ’åº

### åˆè¯†æ’åº

+ ä»€ä¹ˆå«æ’åºï¼Ÿ
  - æ’åºå‰ï¼š3,1,6,9,2,5,8,4,7
  - æ’åºåï¼š1,2,3,4,5,6,7,8,9ï¼ˆå‡åºï¼‰ æˆ–è€… 9,8,7,6,5,4,3,2,1ï¼ˆé™åºï¼‰
+ æ’åºçš„åº”ç”¨æ— å¤„ä¸åœ¨

### åå¤§æ’åºç®—æ³•

![](./images/æ’åº0.png)

+ ä»¥ä¸Šè¡¨æ ¼æ˜¯**åŸºäºæ•°ç»„**è¿›è¡Œæ’åºçš„ä¸€èˆ¬æ€§ç»“è®º
+ å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å½’å¹¶ã€å¿«é€Ÿã€å¸Œå°”ã€å †æ’åºï¼Œå±äº**æ¯”è¾ƒæ’åº**ï¼ˆComparison Sortingï¼‰
  - è¿™ä¸ƒä¸ªæ˜¯è¦æŒæ¡çš„æ’åº
  - å‰©ä¸‹çš„3ä¸ªå¯ä½œä¸ºäº†è§£

+ å¯ç”¨æœ¬åœ°åŒ–çš„ç½‘ç«™æŸ¥çœ‹æ’åºåŠ¨ç”»
  - æŸ¥çœ‹æ¯”è¾ƒæ’åºåŠ¨ç”»: `visualization/ComparisonSort.html`

### å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰

+ å†’æ³¡æ’åºä¹Ÿå«åšèµ·æ³¡æ’åº

  - æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)
  - æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼šO(n)
  -  ç©ºé—´å¤æ‚åº¦ï¼šO(1)

+ æ‰§è¡Œæµç¨‹ï¼ˆæœ¬è¯¾ç¨‹ç»Ÿä¸€ä»¥å‡åºä¸ºä¾‹å­ï¼‰

  - â‘  ä»å¤´å¼€å§‹æ¯”è¾ƒæ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ï¼Œå¦‚æœç¬¬1ä¸ªæ¯”ç¬¬2ä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬çš„ä½ç½®(æ¯æ¬¡äº¤æ¢åï¼Œåé¢çš„å…ƒç´ å³ä¸ºå‰é¢æ‰€æœ‰å…ƒç´ ä¸­æœ€å¤§çš„å…ƒç´ )
    - æ‰§è¡Œå®Œä¸€è½®åï¼Œæœ€æœ«å°¾é‚£ä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§çš„å…ƒç´ 
    - å¯¹äºnä¸ªå…ƒç´ ï¼Œåªéœ€è¦æ‰§è¡Œn-1è½®æ’åºå³å¯
  - â‘¡ å¿½ç•¥ â‘  ä¸­æ›¾ç»æ‰¾åˆ°çš„æœ€å¤§å…ƒç´ ï¼Œé‡å¤æ‰§è¡Œæ­¥éª¤ â‘ ï¼Œç›´åˆ°å…¨éƒ¨å…ƒç´ æœ‰åº

  ![](./images/æ’åº1.png)

+ ä»£ç å®ç°

  ```java
  static void bubbleSort1(Integer[] array) {
      //éå†n-1è½®ï¼Œæ¯æ¬¡éå†ä¸€è½®å¿½ç•¥æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤endæ¯æ¬¡-1
  		for (int end = array.length - 1; end > 0; end--) {
        //å¿½ç•¥å·²ç»éå†è¿‡çš„å…ƒç´ ï¼Œç»§ç»­è¿›è¡Œä¸¤ä¸¤æ¯”è¾ƒ
  			for (int begin = 1; begin <= end; begin++) {
  				if (array[begin] < array[begin - 1]) {
  					int tmp = array[begin];
  					array[begin] = array[begin - 1];
  					array[begin - 1] = tmp;
  				}
  			}
  		}
  	}
  ```

  + æ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(n<sup>2</sup>)

### å†’æ³¡æ’åº(Bubble Sort) -ä¼˜åŒ–â‘ 

+ å¦‚æœåºåˆ—å·²ç»å®Œå…¨æœ‰åºï¼Œå¯ä»¥æå‰ç»ˆæ­¢å†’æ³¡æ’åº

  ![](./images/æ’åº2.png)

 

+ ä»£ç å®ç°å¦‚ä¸‹

  ```java
  static void bubbleSort2(Integer[] array) {
  		for (int end = array.length - 1; end > 0; end--) {
        //æ ‡è®°è¿™ä¸ªå¾ªç¯æ˜¯å¦æœ‰äº¤æ¢ï¼Œå¦‚æœæ²¡æœ‰äº¤æ¢ï¼Œè¯´æ˜æ²¡æœ‰é€†åºå¯¹äº†ï¼Œå³å·²ç»å‡åº
  			boolean sorted = true;
  			for (int begin = 1; begin <= end; begin++) {
  				if (array[begin] < array[begin - 1]) {
  					int tmp = array[begin];
  					array[begin] = array[begin - 1];
  					array[begin - 1] = tmp;
  					sorted = false;
  				}
  			}
        //å¦‚æœæå‰æœ‰åºï¼Œåˆ™é€€å‡ºå¾ªç¯
  			if (sorted) break;
  		}
  }
  ```

  

+ æ€§èƒ½æµ‹è¯•-éšæœºåºåˆ—

  ```java
      //éšæœºç”Ÿæˆ10000ä¸ªï¼Œ [1, 100000]æ•°å­—
      Integer[] array1 = Integers.random(10000, 1, 100000);
      //copyä¸Šé¢çš„æ•°ç»„ï¼Œå› ä¸ºå†’æ³¡æ’åºæ˜¯in-placeæ’åº
  		Integer[] array2 = Integers.copy(array1);
  		Times.test("bubbleSort1", ()-> {
  			bubbleSort1(array1);
  		});
  		Times.test("bubbleSort2", ()-> {
  			bubbleSort2(array2);
  		});
  
  ã€bubbleSort1ã€‘
  å¼€å§‹ï¼š10:53:53.289
  ç»“æŸï¼š10:53:53.865
  è€—æ—¶ï¼š0.576ç§’
  -------------------------------------
  ã€bubbleSort2ã€‘
  å¼€å§‹ï¼š10:53:53.868
  ç»“æŸï¼š10:53:54.569
  è€—æ—¶ï¼š0.701ç§’
  -------------------------------------
  ```

  + æˆ‘ä»¬çœ‹åˆ°ä¼˜åŒ–è¿‡ç«Ÿç„¶æ—¶é—´ä¼šå˜çš„æ›´é•¿?
    - å› ä¸ºä¼˜åŒ–çš„æ—¶æœºæ˜¯ï¼Œåœ¨æŸä¸ªå¾ªç¯åæå‰æœ‰åº
    - å¦‚æœæ²¡æœ‰è¾¾åˆ°æå‰æœ‰åºï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ä¼˜åŒ–å¢åŠ äº†ä¸€éƒ¨åˆ†ä»£ç ï¼Œè¿™ç›¸å½“äºå¢åŠ äº†æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤ï¼Œå½“ç„¶ä¼šè€—æ—¶æ›´åŠ å¤š
    - å› æ­¤è¿™ç§ä¼˜åŒ–å¹¶ä¸ä¸€å®šæ˜¯æœ‰æ•ˆçš„

+ æ€§èƒ½æµ‹è¯•-å‡åºåºåˆ—

  ```java
      //[1,10000]çš„å‡åºåºåˆ—
      Integer[] array1 = Integers.ascOrder(1, 10000);
      //copyä¸Šé¢çš„æ•°ç»„ï¼Œå› ä¸ºå†’æ³¡æ’åºæ˜¯in-placeæ’åº
  		Integer[] array2 = Integers.copy(array1);
  		Times.test("bubbleSort1", ()-> {
  			bubbleSort1(array1);
  		});
  		Times.test("bubbleSort2", ()-> {
  			bubbleSort2(array2);
  		});
  
  ã€bubbleSort1ã€‘
  å¼€å§‹ï¼š10:59:22.969
  ç»“æŸï¼š10:59:23.027
  è€—æ—¶ï¼š0.058ç§’
  -------------------------------------
  ã€bubbleSort2ã€‘
  å¼€å§‹ï¼š10:59:23.030
  ç»“æŸï¼š10:59:23.031
  è€—æ—¶ï¼š0.001ç§’
  -------------------------------------
  ```

  + ä»ä¸Šé¢çš„ç»“æœæ¥çœ‹ï¼Œç¡®å®æå‡äº†æ€§èƒ½

+ å› æ­¤ï¼Œæ€»çš„æ¥çœ‹ï¼Œè¿™ç§ä¼˜åŒ–å¹¶ä¸ä¸€å®šæå‡æ€§èƒ½



### å†’æ³¡æ’åº(Bubble Sort) -ä¼˜åŒ–â‘¡

+ å¦‚æœåºåˆ—å°¾éƒ¨å·²ç»å±€éƒ¨æœ‰åºï¼Œå¯ä»¥è®°å½•æœ€å1æ¬¡äº¤æ¢çš„ä½ç½®ï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°

  ![](./images/æ’åº3.png)

  ![](./images/æ’åº4.png)

  - è®°å½•äº†æœ€åä¸€æ¬¡äº¤æ¢çš„ä½ç½®ä¸º6ï¼Œè¯´æ˜6ä½ç½®ä»¥åŠåé¢çš„å…ƒç´ å·²ç»æœ‰åºã€‚
  - ä¸‹ä¸€æ¬¡æ¯”è¾ƒçš„å…ƒç´ å°±æ˜¯[0,5]ä½ç½®
  - æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)
  - æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼šO(n)
    - å®Œå…¨æœ‰åºæ—¶ï¼Œåªéœ€ä¸€æ¬¡æ‰«æ
  -  ç©ºé—´å¤æ‚åº¦ï¼šO(1)
    - æ²¡æœ‰ç”¨åˆ°é¢å¤–çš„ç©ºé—´
    - ä¹Ÿæ²¡æœ‰é€’å½’è°ƒç”¨

+ å‡ºç°å°¾éƒ¨æœ‰åºçš„æ¦‚ç‡ï¼Œæ¯”å…¨éƒ¨æå‰æœ‰åºçš„æ¦‚ç‡æ›´å¤§ï¼Œå› æ­¤è¿™ç§ä¼˜åŒ–æ›´æœ‰æ•ˆ

  - è€Œä¸”ä¸­é—´å¯èƒ½å‡ºç°å¤šæ¬¡å±€éƒ¨æœ‰åºçš„æƒ…å†µ

+ ä»£ç å®ç°

  ```java
  static void bubbleSort3(Integer[] array) {
  		for (int end = array.length - 1; end > 0; end--) {
  			// sortedIndexçš„åˆå§‹å€¼åœ¨æ•°ç»„å®Œå…¨æœ‰åºçš„æ—¶å€™æœ‰ç”¨
        // åˆå§‹å€¼ä¸º1æ•ˆæœæ˜¯ï¼šå½“æ•°ç»„å®Œå…¨æœ‰åºçš„æ—¶å€™ï¼Œend = 1, æ‰§è¡Œå®Œè¿™æ¬¡å¾ªç¯å°±é€€å‡ºäº†
  			int sortedIndex = 1;
        //ä¸¤ä¸ªå…ƒç´ æ¯”è¾ƒ: beginæ˜¯åé¢çš„å…ƒç´ ï¼Œbegin-1æ˜¯å‰é¢çš„å…ƒç´ 
  			for (int begin = 1; begin <= end; begin++) {
  				if (array[begin] < array[begin - 1]) {
  					int tmp = array[begin];
  					array[begin] = array[begin - 1];
  					array[begin - 1] = tmp;
            //äº¤æ¢ä½ç½®ï¼Œåˆ™æœ€åçš„indexä¸ºbeginï¼Œæ­¤æ—¶è¯¥ä½ç½®ä»¥åŠåé¢çš„å…ƒç´ éƒ½å·²ç»æœ‰åº
  					sortedIndex = begin;
  				}
  			}
        //sortedIndexèµ‹å€¼ç»™end, å¤–å±‚å¾ªç¯åˆå°†end-1
        //æ‰€ä»¥ä¸‹æ¬¡æ¯”è¾ƒè·å–æœ€å¤§å€¼çš„æ˜¯[0, sortedIndex-1]ä½ç½®çš„å…ƒç´ 
  			end = sortedIndex;
  		}
  	}
  ```

+ æ€§èƒ½æµ‹è¯•-å°¾éƒ¨æœ‰åº

  ```java
      //åé¢2000ä¸ªæ˜¯å‡åºçš„
      Integer[] array1 = Integers.tailAscOrder(1, 10000, 2000);
  		Integer[] array2 = Integers.copy(array1);
  		Integer[] array3 = Integers.copy(array1);
  
  		Times.test("bubbleSort1", ()-> {
  			bubbleSort1(array1);
  		});
  		Times.test("bubbleSort2", ()-> {
  			bubbleSort2(array2);
  		});
  		
  		Times.test("bubbleSort3", ()-> {
  			bubbleSort3(array3);
  		});
  
  ã€bubbleSort1ã€‘
  å¼€å§‹ï¼š11:23:39.878
  ç»“æŸï¼š11:23:40.054
  è€—æ—¶ï¼š0.176ç§’
  -------------------------------------
  ã€bubbleSort2ã€‘
  å¼€å§‹ï¼š11:23:40.057
  ç»“æŸï¼š11:23:40.128
  è€—æ—¶ï¼š0.071ç§’
  -------------------------------------
  ã€bubbleSort3ã€‘
  å¼€å§‹ï¼š11:23:40.128
  ç»“æŸï¼š11:23:40.150
  è€—æ—¶ï¼š0.022ç§’
  -------------------------------------
  ```

  + å› æ­¤å‡å¦‚å°¾éƒ¨æœ‰åºï¼Œæ€§èƒ½æ˜¯æœ‰æ‰€æå‡çš„

### æ’åºç®—æ³•çš„ç¨³å®šæ€§ï¼ˆStabilityï¼‰

+ å¦‚æœç›¸ç­‰çš„2ä¸ªå…ƒç´ ï¼Œåœ¨æ’åºå‰åçš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ï¼Œé‚£ä¹ˆè¿™æ˜¯ç¨³å®šçš„æ’åºç®—æ³•

  - æ’åºå‰ï¼š5, 1, <font color=red>3ğ‘</font>, 4, 7, <font color=red>3ğ‘</font>
  - ç¨³å®šçš„æ’åºï¼š 1, <font color=red>3ğ‘</font>, <font color=red>3ğ‘,</font> 4, 5, 7
  - ä¸ç¨³å®šçš„æ’åºï¼š1, <font color=red>3ğ‘</font>, <font color=red>3ğ‘</font>, 4, 5, 7

+ å¯¹è‡ªå®šä¹‰å¯¹è±¡è¿›è¡Œæ’åºæ—¶ï¼Œç¨³å®šæ€§ä¼šå½±å“æœ€ç»ˆçš„æ’åºæ•ˆæœ

+ å†’æ³¡æ’åºå±äºç¨³å®šçš„æ’åºç®—æ³•

  - å› ä¸ºç›¸ç­‰æ—¶ï¼Œå¹¶ä¸ä¼šäº¤æ¢ä½ç½®

  - ç¨æœ‰ä¸æ…ï¼Œç¨³å®šçš„æ’åºç®—æ³•ä¹Ÿèƒ½è¢«å†™æˆä¸ç¨³å®šçš„æ’åºç®—æ³•ï¼Œæ¯”å¦‚ä¸‹é¢çš„å†’æ³¡æ’åºä»£ç æ˜¯ä¸ç¨³å®šçš„

    ![](./images/æ’åº5.png)

### åŸåœ°ç®—æ³•ï¼ˆIn-place Algorithmï¼‰

+ ä½•ä¸ºåŸåœ°ç®—æ³•ï¼Ÿ
  - ä¸ä¾èµ–é¢å¤–çš„èµ„æºæˆ–è€…ä¾èµ–å°‘æ•°çš„é¢å¤–èµ„æºï¼Œä»…ä¾é è¾“å‡ºæ¥è¦†ç›–è¾“å…¥
    - ä¾‹å¦‚å†’æ³¡æ’åºä¼ è¿›æ¥çš„æ•°ç»„ï¼Œæˆ‘ä»¬è¾“å‡ºçš„è¿˜æ˜¯è¿™ä¸ªæ•°ç»„ï¼Œä½†å†…å®¹è¢«è¦†ç›–ä¸ºæœ‰åºçš„äº†
    - ç©ºé—´å¤æ‚åº¦æ¯”è¾ƒä½ï¼Œæ²¡æœ‰ç”³è¯·ä¸€å¤§å †çš„ç©ºé—´
  - ç©ºé—´å¤æ‚åº¦ä¸º ğ‘‚(1) çš„éƒ½å¯ä»¥è®¤ä¸ºæ˜¯åŸåœ°ç®—æ³•
+ éåŸåœ°ç®—æ³•ï¼Œç§°ä¸º Not-in-place æˆ–è€… Out-of-place
+ å†’æ³¡æ’åºå±äº In-place

### é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰

+ æ‰§è¡Œæµç¨‹

  - â‘  ä»åºåˆ—ä¸­æ‰¾å‡ºæœ€å¤§çš„é‚£ä¸ªå…ƒç´ ç´¢å¼•ï¼Œç„¶åå°†è¿™ä¸ªæœ€å¤§çš„å…ƒç´ ä¸æœ€æœ«å°¾çš„å…ƒç´ äº¤æ¢ä½ç½®

    - æ‰§è¡Œå®Œä¸€è½®åï¼Œæœ€æœ«å°¾çš„é‚£ä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§çš„å…ƒç´ çš„ç´¢å¼•

  - å¿½ç•¥ â‘  ä¸­æ›¾ç»æ‰¾åˆ°çš„æœ€å¤§å…ƒç´ ï¼Œé‡å¤æ‰§è¡Œæ­¥éª¤ â‘ 

    ```java
    for (int end = array.length - 1; end > 0; end--) {
    			int maxIndex = 0;//æœ€å¤§ä½ç½®çš„ç´¢å¼•
    			for (int begin = 1; begin <= end; begin++) {
    				if (array[maxIndex] <= array[begin]) {
    					 maxIndex = begin; //æ›´æ–°æœ€å¤§ä½ç½®çš„ç´¢å¼•
    				}
    			}
          //ä¸æœ€åä¸€ä¸ªå…ƒç´ ,äº¤æ¢å†…å®¹
    			int tmp = array[maxIndex];
    			array[maxIndex] = array[end];
    			array[end] = tmp;
    }
    ```

+ é€‰æ‹©æ’åºçš„äº¤æ¢æ¬¡æ•°è¦è¿œè¿œå°‘äºå†’æ³¡æ’åºï¼Œå¹³å‡æ€§èƒ½ä¼˜äºå†’æ³¡æ’åº
+ æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œå±äºä¸ç¨³å®šæ’åº

+ æ€è€ƒ
  - é€‰æ‹©æ’åºæ˜¯å¦è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Ÿ
    - ä½¿ç”¨å †æ¥é€‰æ‹©æœ€å¤§å€¼

### å †æ’åºï¼ˆHeap Sortï¼‰

+ å †æ’åºå¯ä»¥è®¤ä¸ºæ˜¯å¯¹é€‰æ‹©æ’åºçš„ä¸€ç§ä¼˜åŒ–

+ æ‰§è¡Œæµç¨‹

  - â‘  å¯¹åºåˆ—è¿›è¡ŒåŸåœ°å»ºå †ï¼ˆheapifyï¼‰

  - é‡å¤æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œç›´åˆ°å †çš„å…ƒç´ æ•°é‡ä¸º 1

    -  äº¤æ¢å †é¡¶å…ƒç´ ä¸å°¾å…ƒç´ 

      ```
       ä½¿ç”¨å¤§é¡¶å †ï¼Œåˆ™å°†æœ€å¤§å€¼äº¤æ¢åˆ°æœ€å
      ```

    -  å †çš„å…ƒç´ æ•°é‡å‡1

      ```
      å¿½ç•¥å·²ç»æ’å¥½åºçš„å…ƒç´ 
      ```

    -  å¯¹ 0 ä½ç½®è¿›è¡Œ 1 æ¬¡ siftDown æ“ä½œ

      ```
      å¯¹å †é¡¶æ‰§è¡Œä¸‹æ»¤æ“ä½œï¼Œæ¢å¤å¤§é¡¶å †
      ```

+ æ‰§è¡Œç¤ºä¾‹ 

  1. å¯¹äºå¦‚ä¸‹æ•°ç»„

     ![](./images/æ’åº6.png)

  2. åŸåœ°å»ºå †å¦‚ä¸‹

     ![](./images/æ’åº7.png)

  3. é‡å¤æ‰§è¡Œæ­¥éª¤2ï¼Œç›´åˆ°å…ƒç´ æ•°é‡ä¸º1

     ![](./images/æ’åº8.png)

     ![](./images/æ’åº9.png)

+ æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œå±äºä¸ç¨³å®šæ’åº

  ```
  ä¸ç¨³å®šçš„æ’åº
  å‡å¦‚å‰ä¸¤ä¸ªéƒ½æ˜¯38ï¼Œé‚£ä¹ˆé¡¶éƒ¨æ¢åˆ°æœ€åä¹‹åï¼Œä¸¤ä¸ª38çš„é¡ºåºå°±ä¸åŸæ¥ä¸ä¸€æ ·äº†
  ```

  

+ ä»£ç å®ç°

  ```java
  public class HeapSort<T extends Comparable<T>> extends Sort<T> {
  	private int heapSize;
  
  	@Override
  	protected void sort() {
  		// åŸåœ°å»ºå †
  		heapSize = array.length;
  		for (int i = (heapSize >> 1) - 1; i >= 0; i--) {
  			siftDown(i);
  		}
  		
  		while (heapSize > 1) {
  			// äº¤æ¢å †é¡¶å…ƒç´ å’Œå°¾éƒ¨å…ƒç´ 
  			swap(0, --heapSize);
  
  			// å¯¹0ä½ç½®è¿›è¡ŒsiftDownï¼ˆæ¢å¤å †çš„æ€§è´¨ï¼‰
  			siftDown(0);
  		}
  	}
  	
    //ä¸‹æ»¤çš„æ“ä½œ
  	private void siftDown(int index) {
  		T element = array[index];
  		
  		int half = heapSize >> 1;
  		while (index < half) { // indexå¿…é¡»æ˜¯éå¶å­èŠ‚ç‚¹
  			// é»˜è®¤æ˜¯å·¦è¾¹è·Ÿçˆ¶èŠ‚ç‚¹æ¯”
  			int childIndex = (index << 1) + 1;
  			T child = array[childIndex];
  			
  			int rightIndex = childIndex + 1;
  			// å³å­èŠ‚ç‚¹æ¯”å·¦å­èŠ‚ç‚¹å¤§
  			if (rightIndex < heapSize && 
  					cmp(array[rightIndex], child) > 0) { 
  				child = array[childIndex = rightIndex];
  			}
  			
  			// å¤§äºç­‰äºå­èŠ‚ç‚¹
  			if (cmp(element, child) >= 0) break;
  			
  			array[index] = child;
  			index = childIndex;
  		}
  		array[index] = element;
  	}
  }
  ```

### æŠ½è±¡çˆ¶ç±»sort

```java
public abstract class Sort<T extends Comparable<T>> implements Comparable<Sort<T>> {
	protected T[] array;
	private int cmpCount;
	private int swapCount;
	private long time;
	private DecimalFormat fmt = new DecimalFormat("#.00");
	
	public void sort(T[] array) {
		if (array == null || array.length < 2) return;
		
		this.array = array;
		
		long begin = System.currentTimeMillis();
		sort();
		time = System.currentTimeMillis() - begin;
	}
	
	@Override
	public int compareTo(Sort<T> o) {
		int result = (int)(time - o.time);
		if (result != 0) return result;
		
		result = cmpCount - o.cmpCount;
		if (result != 0) return result;
		
		return swapCount - o.swapCount;
	}
	
	protected abstract void sort();
	
	/*
	 * è¿”å›å€¼ç­‰äº0ï¼Œä»£è¡¨ array[i1] == array[i2]
	 * è¿”å›å€¼å°äº0ï¼Œä»£è¡¨ array[i1] < array[i2]
	 * è¿”å›å€¼å¤§äº0ï¼Œä»£è¡¨ array[i1] > array[i2]
	 */
	protected int cmp(int i1, int i2) {
		cmpCount++;
		return array[i1].compareTo(array[i2]);
	}
	
	protected int cmp(T v1, T v2) {
		cmpCount++;
		return v1.compareTo(v2);
	}
	
	protected void swap(int i1, int i2) {
		swapCount++;
		T tmp = array[i1];
		array[i1] = array[i2];
		array[i2] = tmp;
	}
	
	@Override
	public String toString() { 
		String timeStr = "è€—æ—¶ï¼š" + (time / 1000.0) + "s(" + time + "ms)";
		String compareCountStr = "æ¯”è¾ƒï¼š" + numberString(cmpCount);
		String swapCountStr = "äº¤æ¢ï¼š" + numberString(swapCount);
		String stableStr = "ç¨³å®šæ€§ï¼š" + isStable();
		return "ã€" + getClass().getSimpleName() + "ã€‘\n" 
				+ stableStr + " \t"
				+ timeStr + " \t"
				+ compareCountStr + "\t "
				+ swapCountStr + "\n"
				+ "------------------------------------------------------------------";

	}
	
	private String numberString(int number) {
		if (number < 10000) return "" + number;
		if (number < 100000000) return fmt.format(number / 10000.0) + "ä¸‡";
		return fmt.format(number / 100000000.0) + "äº¿";
	}
	
	private boolean isStable() {
    if (this instanceof SelectionSort) return false;
    
    //é€šè¿‡åˆ¤æ–­å…¶åˆ†æ•°æ˜¯å¦è¿˜ä¿æŒåŸæ¥çš„é¡ºåºæ¥åˆ¤æ–­å…¶æ˜¯å¦æ˜¯ç¨³å®šçš„
		Student[] students = new Student[20];
		for (int i = 0; i < students.length; i++) {
			students[i] = new Student(i * 10, 10);
		}
		sort((T[]) students);
    
		for (int i = 1; i < students.length; i++) {
			int score = students[i].score;
			int prevScore = students[i - 1].score;
			if (score != prevScore + 10) return false;
		}
		return true;
	}
}

package com.mj;
public class Student implements Comparable<Student> {
	public int score;
	public int age;
	
	public Student(int score, int age) {
		this.score = score;
		this.age = age;
	}
	
	@Override
	public int compareTo(Student o) {
		return age - o.age;
	}
}

```

+ è¦æ±‚å…ƒç´ ç±»å‹å…·å¤‡å¯æ¯”è¾ƒæ€§

### é‡æ„å†’æ³¡æ’åºï¼Œé€‰æ‹©æ’åº ï¼Œå †æ’åº

+ å†’æ³¡æ’åº

  ```java
  public class BubbleSort1<T extends Comparable<T>> extends Sort<T> {
  
  	@Override
  	protected void sort() {
  		for (int end = array.length - 1; end > 0; end--) {
  			for (int begin = 1; begin <= end; begin++) {
  				// if (array[begin] < array[begin - 1]) {
  				if (cmp(begin, begin - 1) < 0) {
  					swap(begin, begin - 1);
  				}
  			}
  		}
  	}
  
  }
  
  public class BubbleSort2<T extends Comparable<T>> extends Sort<T> {
  
  	@Override
  	protected void sort() {
  		for (int end = array.length - 1; end > 0; end--) {
  			boolean sorted = true;
  			for (int begin = 1; begin <= end; begin++) {
  				// if (array[begin] < array[begin - 1]) {
  				if (cmp(begin, begin - 1) < 0) {
  					swap(begin, begin - 1);
  					sorted = false;
  				}
  			}
  			if (sorted) break;
  		}
  	}
  }
  
  public class BubbleSort3<T extends Comparable<T>> extends Sort<T> {
  	@Override
  	protected void sort() {
  		for (int end = array.length - 1; end > 0; end--) {
  			int sortedIndex = 1;
  			for (int begin = 1; begin <= end; begin++) {
  				// if (array[begin] < array[begin - 1]) {
  				if (cmp(begin, begin - 1) < 0) {
  					swap(begin, begin - 1);
  					sortedIndex = begin;
  				}
  			}
  			end = sortedIndex;
  		}
  	}
  }
  
  ```

+ é€‰æ‹©æ’åº

  ```java
  public class SelectionSort<T extends Comparable<T>> extends Sort<T> {
  
  	@Override
  	protected void sort() {
  		for (int end = array.length - 1; end > 0; end--) {
  			int maxIndex = 0;
  			for (int begin = 0; begin <= end; begin++) {
  				// if (array[maxIndex] <= array[begin]) {
  				if (cmp(maxIndex, begin) <= 0) {
  					maxIndex = begin;
  				}
  			}
  			swap(maxIndex, end);
  		}
  	}
  
  }
  ```

+ å †æ’åº

  ```java
  public class HeapSort<T extends Comparable<T>> extends Sort<T> {
  	private int heapSize;
  
  	@Override
  	protected void sort() {
  		// åŸåœ°å»ºå †
  		heapSize = array.length;
  		for (int i = (heapSize >> 1) - 1; i >= 0; i--) {
  			siftDown(i);
  		}
  		
  		while (heapSize > 1) {
  			// äº¤æ¢å †é¡¶å…ƒç´ å’Œå°¾éƒ¨å…ƒç´ 
  			swap(0, --heapSize);
  
  			// å¯¹0ä½ç½®è¿›è¡ŒsiftDownï¼ˆæ¢å¤å †çš„æ€§è´¨ï¼‰
  			siftDown(0);
  		}
  	}
  	
  	private void siftDown(int index) {
  		T element = array[index];
  		
  		int half = heapSize >> 1;
  		while (index < half) { // indexå¿…é¡»æ˜¯éå¶å­èŠ‚ç‚¹
  			// é»˜è®¤æ˜¯å·¦è¾¹è·Ÿçˆ¶èŠ‚ç‚¹æ¯”
  			int childIndex = (index << 1) + 1;
  			T child = array[childIndex];
  			int rightIndex = childIndex + 1;
  			// å³å­èŠ‚ç‚¹æ¯”å·¦å­èŠ‚ç‚¹å¤§
  			if (rightIndex < heapSize && 
  					cmp(array[rightIndex], child) > 0) { 
  				child = array[childIndex = rightIndex];
  			}
  			// å¤§äºç­‰äºå­èŠ‚ç‚¹
  			if (cmp(element, child) >= 0) break;
  			
  			array[index] = child;
  			index = childIndex;
  		}
  		array[index] = element;
  	}
  }
  ```

+ æ€§èƒ½å¯¹æ¯”æµ‹è¯•

  ```java
  public static void main(String[] args) {
   Integer[] array = Integers.random(10000, 1, 20000);	
   testSorts(array, 
  				new SelectionSort(), 
  				new HeapSort(), 
  				new BubbleSort3());
  }			
  
  static void testSorts(Integer[] array, Sort... sorts) {
  		for (Sort sort : sorts) {
  			Integer[] newArray = Integers.copy(array);
  			sort.sort(newArray);
  			Asserts.test(Integers.isAscOrder(newArray));
  		}
  		Arrays.sort(sorts);
  		for (Sort sort : sorts) {
  			System.out.println(sort);
  		}
  	}
  
  ã€HeapSortã€‘
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.004s(4ms) 	æ¯”è¾ƒï¼š23.53ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€SelectionSortã€‘
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.105s(105ms) 	æ¯”è¾ƒï¼š5000.50ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€BubbleSort3ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.283s(283ms) 	æ¯”è¾ƒï¼š4994.87ä¸‡	 äº¤æ¢ï¼š2514.03ä¸‡
  ------------------------------------------------------------------
  ```

  + HeapSortçš„æ€§èƒ½æ›´é«˜

### æ’å…¥æ’åº ï¼ˆInsertion Sortï¼‰

+ æ’å…¥æ’åºéå¸¸ç±»ä¼¼äºæ‰‘å…‹ç‰Œçš„æ’åº

  ![](./images/æ’åº11.png)

+ æ‰§è¡Œæµç¨‹

  ![](./images/æ’åº12.png)

  - â‘  åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ’å…¥æ’åºä¼šå°†åºåˆ—åˆ†ä¸º2éƒ¨åˆ†

    - å¤´éƒ¨æ˜¯å·²ç»æ’å¥½åºçš„ï¼Œå°¾éƒ¨æ˜¯å¾…æ’åºçš„

  - ä»å¤´å¼€å§‹æ‰«ææ¯ä¸€ä¸ªå…ƒç´ 

    - æ¯å½“æ‰«æåˆ°ä¸€ä¸ªå…ƒç´ ï¼Œå°±å°†å®ƒæ’å…¥åˆ°å¤´éƒ¨åˆé€‚çš„ä½ç½®ï¼Œä½¿å¾—å¤´éƒ¨æ•°æ®ä¾ç„¶ä¿æŒæœ‰åº

      ```
      æ€æ ·æ’å…¥åˆé€‚çš„ä½ç½®?
      å°†å¾…æ’åºçš„å…ƒç´ å’Œå·²ç»æ’å¥½åºçš„å…ƒç´ ï¼Œä»å°¾éƒ¨å¼€å§‹è¿›è¡Œæ¯”è¾ƒ
      
      å½“å¾…æ’åºçš„å…ƒç´  < å·²ç»æ’å¥½åºçš„å…ƒç´ 
      ```

      

+ æ’å…¥æ’åºçš„å®ç°

  ```
  å°†å¾…æ’åºçš„å…ƒç´ å’Œå·²ç»æ’å¥½åºçš„å…ƒç´ ï¼Œä»å°¾éƒ¨å¼€å§‹è¿›è¡Œæ¯”è¾ƒ
  å½“å¾…æ’åºçš„å…ƒç´  < å·²ç»æ’å¥½åºçš„å…ƒç´ ï¼Œ åˆ™äº¤æ¢ä½ç½®ï¼Œç»§ç»­å¾€å‰æ¯”è¾ƒ
  ```

  ```java
  public class InsertionSort1<T extends Comparable<T>> extends Sort<T> {
  	@Override
  	protected void sort() {
  		for (int begin = 1; begin < array.length; begin++) {
        //beginæ˜¯å¾…æ’åºçš„å…ƒç´ ï¼Œ beginå‰é¢çš„æ˜¯å·²ç»æ’å¥½åºçš„å…ƒç´ 
  			int cur = begin;
        //å½“å¾…æ’åºçš„å…ƒç´  < å…¶å‰ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒï¼Œåˆ™äº¤æ¢ä½ç½®
        //ç¨³å®šæ’åº
  			while (cur > 0 && cmp(cur, cur - 1) < 0) {
  				swap(cur, cur - 1);
  				cur--;
  			}
  		}
  	}
  }
  ```

+ æ€§èƒ½å¯¹æ¯”

  ```java
  Integer[] array = Integers.random(10000, 1, 20000);
  testSorts(array, 
  				new InsertionSort1(), 
  				new SelectionSort(), 
  				new HeapSort(), 
  				new BubbleSort3());	
  				
  ã€HeapSortã€‘
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.004s(4ms) 	æ¯”è¾ƒï¼š23.54ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€SelectionSortã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.093s(93ms) 	æ¯”è¾ƒï¼š5000.50ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€InsertionSort1ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.138s(138ms) 	æ¯”è¾ƒï¼š2528.50ä¸‡	 äº¤æ¢ï¼š2527.50ä¸‡
  ------------------------------------------------------------------
  ã€BubbleSort3ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.257s(257ms) 	æ¯”è¾ƒï¼š4992.58ä¸‡	 äº¤æ¢ï¼š2527.50ä¸‡
  ------------------------------------------------------------------
  ```

  + æ’å…¥æ’åºæ€§èƒ½æ¯”è¾ƒä½ï¼Œæœ‰å¤§é‡çš„æ¯”è¾ƒå’Œäº¤æ¢
  + æ¯”è¾ƒå’Œäº¤æ¢çš„æ•°é‡è·Ÿé€†åºå¯¹çš„æ•°é‡ç›¸å…³

### æ’å…¥æ’åº - é€†åºå¯¹ï¼ˆInversionï¼‰

+ ä»€ä¹ˆæ˜¯é€†åºå¯¹ï¼Ÿ

  + æ•°ç»„ <2,3,8,6,1> çš„é€†åºå¯¹ä¸ºï¼š<2,1> <3,1> <8,1> <8,6> <6,1>ï¼Œå…±5ä¸ªé€†åºå¯¹
  + é€†åºå¯¹è¶Šå¤šï¼Œæ¯”è¾ƒå’Œäº¤æ¢çš„æ¬¡æ•°è¶Šå¤š

+ æ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸é€†åºå¯¹çš„æ•°é‡æˆæ­£æ¯”å…³ç³»

  - é€†åºå¯¹çš„æ•°é‡è¶Šå¤šï¼Œæ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦è¶Šé«˜

+ æ—¶é—´å¤æ‚åº¦

  - æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)

    ```
    æœ€å:å…¨éƒ¨é€†åº
    ```

    ![](./images/æ’åº13.png)

  - æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼šO(n)

    ```
    æœ€å¥½:å…¨éƒ¨æ­£åºï¼Œå·²ç»æ’å¥½åºäº†ï¼Œéå†ä¸€éå³å¯
    ```

+ ç©ºé—´å¤æ‚åº¦ï¼šO(1)

+ å±äºç¨³å®šæ’åº

+ å½“é€†åºå¯¹çš„æ•°é‡æå°‘æ—¶ï¼Œæ’å…¥æ’åºçš„æ•ˆç‡ç‰¹åˆ«é«˜
  - ç”šè‡³é€Ÿåº¦æ¯” O (nlogn) çº§åˆ«çš„å¿«é€Ÿæ’åºè¿˜è¦å¿«
+ æ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæ’å…¥æ’åºçš„æ•ˆç‡ä¹Ÿæ˜¯éå¸¸å¥½çš„



### æ’å…¥æ’åº - ä¼˜åŒ–â‘ 

+ æ€è·¯æ˜¯å°†ã€äº¤æ¢ã€‘è½¬ä¸ºã€æŒªåŠ¨ã€‘

  - å…ˆå°†å¾…æ’å…¥çš„å…ƒç´ å¤‡ä»½
  - å¤´éƒ¨æœ‰åºæ•°æ®ä¸­æ¯”å¾…æ’å…¥å…ƒç´ å¤§çš„ï¼Œéƒ½æœå°¾éƒ¨æ–¹å‘æŒªåŠ¨1ä¸ªä½ç½®
  - å°†å¾…æ’å…¥å…ƒç´ æ”¾åˆ°æœ€ç»ˆçš„åˆé€‚ä½ç½® 

+ ä¼˜åŒ–çš„åœ°æ–¹åœ¨å“ª?

  ```
  å¦‚æœä½¿ç”¨äº¤æ¢ï¼Œæ¯æ¬¡whileå¾ªç¯ä¸­ç›¸å½“äºè¦æ‰§è¡Œ3è¡Œä»£ç ï¼Œæ•ˆç‡æ¯”è¾ƒä½
  ```

+ æ‰§è¡Œæµç¨‹

  1. å…ˆå°†index=5ä½ç½®çš„å…ƒç´ å¤‡ä»½

     ![](./images/æ’åº14.png)

  2. å¤´éƒ¨æœ‰åºæ•°æ®ä¸­æ¯”å¾…æ’å…¥å…ƒç´ å¤§çš„ï¼Œéƒ½æœå°¾éƒ¨æ–¹å‘æŒªåŠ¨1ä¸ªä½ç½®

     ![](./images/æ’åº15.png)

  3. å°†å…ƒç´ æ’å…¥åˆ°å¯¹åº”ä½ç½®,ç›´æ¥èµ‹å€¼å³å¯

     ![](./images/æ’åº16.png)

+ ä¸ºä»€ä¹ˆä¸å…ˆæ‰¾åˆ°æ’å…¥çš„ä½ç½®ï¼Œå†è¿›è¡Œå…ƒç´ çš„æŒªåŠ¨ï¼Ÿ

  ```
  è¿™ä¼šç»å†ä¸¤æ¬¡å¾ªç¯ï¼Œæ•ˆç‡æ›´ä½
  ```

+ ä»£ç å®ç°

  ````java
  public class InsertionSort2<T extends Comparable<T>> extends Sort<T> {
  	@Override
  	protected void sort() {
  		for (int begin = 1; begin < array.length; begin++) {
  			int cur = begin;
  			T v = array[cur];
        //è¿›å…¥whileå¾ªç¯çš„æ¬¡æ•°è¶Šå¤šä¼˜åŒ–è¶Šå¤§
  			while (cur > 0 && cmp(v, array[cur - 1]) < 0) {
  				array[cur] = array[cur - 1];
  				cur--;
  			}
        //ä¸ä¼˜åŒ–å‰çš„ä»£ç ç›¸æ¯”, whileå¾ªç¯å¤–æ‰§è¡Œèµ‹å€¼æ“ä½œ
  			array[cur] = v;
  		}
  	}
  }
  ````

+ æ€§èƒ½å¯¹æ¯”

  ```java
  Integer[] array = Integers.random(10000, 1, 20000);	
  testSorts(array, 
  				new InsertionSort1(), 
  				new InsertionSort2(), 
  				new SelectionSort(), 
  				new HeapSort(), 
  				new BubbleSort3());	
  
  ã€HeapSortã€‘
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.005s(5ms) 	æ¯”è¾ƒï¼š23.53ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€SelectionSortã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.105s(105ms) 	æ¯”è¾ƒï¼š5000.50ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€InsertionSort1ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.138s(138ms) 	æ¯”è¾ƒï¼š2483.62ä¸‡	 äº¤æ¢ï¼š2482.62ä¸‡
  ------------------------------------------------------------------
  ã€InsertionSort2ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.16s(160ms) 	æ¯”è¾ƒï¼š2483.62ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€BubbleSort3ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.252s(252ms) 	æ¯”è¾ƒï¼š4995.75ä¸‡	 äº¤æ¢ï¼š2482.62ä¸‡
  ------------------------------------------------------------------
  ```

  + æˆ‘ä»¬ç«Ÿç„¶å‘ç°InsertionSort2æ¯”InsertionSort1çš„æ—¶é—´å¤§
  + å› ä¸ºæˆ‘ä»¬çš„ä¼˜åŒ–æ˜¯åœ¨whileå¾ªç¯é‡Œï¼Œå¦‚æœè¿›å…¥whileå¾ªç¯çš„æ¬¡æ•°è¾ƒå°‘ï¼Œå…¶åœ¨whileå¾ªç¯å¤–å¤šäº†ä¸€å¥èµ‹å€¼æ“ä½œï¼Œåè€Œä¼šä½¿æ—¶é—´å˜å¤§ã€‚å› æ­¤é€†åºå¯¹çš„æ•°é‡è¶Šå¤šæå‡è¶Šæ˜æ˜¾

+ æ€§èƒ½å¯¹æ¯”-å®Œå…¨é€†åº

  ```java
  Integer[] array = Integers.descOrder(1, 10000);
  testSorts(array, 
  				new InsertionSort1(), 
  				new InsertionSort2());
          
  ã€InsertionSort2ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.219s(219ms) 	æ¯”è¾ƒï¼š4999.50ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€InsertionSort1ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.326s(326ms) 	æ¯”è¾ƒï¼š4999.50ä¸‡	 äº¤æ¢ï¼š4999.50ä¸‡
  ```

  + å› æ­¤é€†åºå¯¹çš„æ•°é‡è¶Šå¤šæå‡è¶Šæ˜æ˜¾

### äºŒåˆ†æœç´¢ï¼ˆBinary Searchï¼‰

+ å¦‚ä½•ç¡®å®šä¸€ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Ÿï¼ˆå‡è®¾æ•°ç»„é‡Œé¢å…¨éƒ½æ˜¯æ•´æ•°ï¼‰

  - å¦‚æœæ˜¯æ— åºæ•°ç»„ï¼Œä»ç¬¬ 0 ä¸ªä½ç½®å¼€å§‹éå†æœç´¢ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n)

    ![](./images/æ’åº17.png)

+ å¦‚æœæ˜¯æœ‰åºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨äºŒåˆ†æœç´¢ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(logn)

  ![](./images/æ’åº18.png)

### äºŒåˆ†æœç´¢ â€“ æ€è·¯

+ å‡è®¾åœ¨ [<font color="#FF62D7">begin</font>, <font color="#14a249">end</font>) èŒƒå›´å†…æœç´¢æŸä¸ªå…ƒç´  <font color=red>v</font>ï¼Œ<font color="#7030A0">mid </font>== (<font color="#FF62D7">begin</font> + <font color="#14a249">end</font>) / 2

  ```
  beginæ˜¯åºåˆ—çš„é¦–ä½ç½®
  endæ˜¯åºåˆ—çš„æœ«ä½ç½®+1 = begin + é•¿åº¦
  å·¦å¼€å³é—­
  ```

+ å¦‚æœ <font color=red>v</font> < mï¼Œå» [<font color="#FF62D7">begin</font>, <font color="#7030A0">mid</font> )èŒƒå›´å†…äºŒåˆ†æœç´¢

+ å¦‚æœ <font color=red>v</font> < mï¼Œå» [<font color="#7030A0">mid</font> + 1, <font color="#14a249">end</font>) èŒƒå›´å†…äºŒåˆ†æœç´¢

+ å¦‚æœ <font color=red>v</font> <font color="#7030A0">== </font>mï¼Œç›´æ¥è¿”å› <font color="#7030A0">mid</font>

![](./images/æ’åº19.png)

### äºŒåˆ†æœç´¢ â€“ å®ä¾‹

+ æœç´¢10

  ![](./images/æ’åº20.png)

+ æœç´¢3

  ![](./images/æ’åº21.png)

  ```
  æœ€åä¸€æ¬¡æ—¶ï¼Œbegin =0,  end = 1, mid = 0ã€‚
  ä¸‹æ¬¡begin = mid + 1 = 1 == end ï¼Œå¯»æ‰¾ç»“æŸï¼Œå¤±è´¥
  ```

+ å…·ä½“ä»£ç å®ç°

  ```java
  package com.mj;
  public class BinarySearch {
  	/**
  	 * æŸ¥æ‰¾våœ¨æœ‰åºæ•°ç»„arrayä¸­çš„ä½ç½®
  	 */
  	public static int indexOf(int[] array, int v) {
  		if (array == null || array.length == 0) return -1;
  		int begin = 0;
  		int end = array.length;
  		while (begin < end) {
  			int mid = (begin + end) >> 1;
  			if (v < array[mid]) {
  				end = mid;
  			} else if (v > array[mid]) {
  				begin = mid + 1;
  			} else {
  				return mid;
  			}
  		}
  		return -1;
  	}
  }
  
  ```

+ æ€è€ƒ: å¦‚æœå­˜åœ¨å¤šä¸ªé‡å¤çš„å€¼ï¼Œè¿”å›çš„æ˜¯å“ªä¸€ä¸ªï¼Ÿ

  - ä¸ç¡®å®š

### æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ–â‘¡

+ åœ¨å…ƒç´  v çš„æ’å…¥è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å…ˆäºŒåˆ†æœç´¢å‡ºåˆé€‚çš„æ’å…¥ä½ç½®ï¼Œç„¶åå†å°†å…ƒç´  v æ’å…¥

  ![](./images/æ’åº22.png)

+ è¦æ±‚äºŒåˆ†æœç´¢è¿”å›çš„æ’å…¥ä½ç½®ï¼šç¬¬1ä¸ªå¤§äº v çš„å…ƒç´ ä½ç½®

  - å¦‚æœ  <font color=red>v</font> æ˜¯ 5ï¼Œè¿”å› 2
  - å¦‚æœ  <font color=red>v</font> æ˜¯ 1ï¼Œè¿”å› 0
  - å¦‚æœ  <font color=red>v</font> æ˜¯ 15ï¼Œè¿”å› 7
  - å¦‚æœ  <font color=red>v</font> æ˜¯ 8ï¼Œè¿”å› 5

### æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ– â€“ æ€è·¯

+ å‡è®¾åœ¨ [<font color="#FF62D7">begin</font>, <font color="#14a249">end</font>) èŒƒå›´å†…æœç´¢æŸä¸ªå…ƒç´   <font color=red>v</font>ï¼Œmid == (<font color="#FF62D7">begin</font> + <font color="#14a249">end</font>) / 2

+ å¦‚æœ  <font color=red>v</font> <font color="#FF62D7"><</font> mï¼Œå» [<font color="#FF62D7">begin</font>, <font color="#7030A0">mid</font>) èŒƒå›´å†…äºŒåˆ†æœç´¢

+ å¦‚æœ  <font color=red>v</font> <font color="#14a249">â‰¥</font> mï¼Œå» [<font color="#7030A0">mid</font> + 1, <font color="#14a249">end</font>) èŒƒå›´å†…äºŒåˆ†æœç´¢

  ![](./images/æ’åº23.png)

### æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ– â€“ å®ä¾‹

![](./images/æ’åº24.png)

![](./images/æ’åº25.png)

![](./images/æ’åº26.png)

+ ä»£ç å®ç°

```java
public class InsertionSort3<T extends Comparable<T>> extends Sort<T> {
	@Override
	protected void sort() {
		for (int begin = 1; begin < array.length; begin++) {
			insert(begin, search(begin));
		}
	}
	
	/**
	 * å°†sourceä½ç½®çš„å…ƒç´ æ’å…¥åˆ°destä½ç½®
	 * @param source
	 * @param dest
	 */
	private void insert(int source, int dest) {
		T v = array[source];
		for (int i = source; i > dest; i--) {
			array[i] = array[i - 1];
		}
		array[dest] = v;
	}
	
	/**
	 * åˆ©ç”¨äºŒåˆ†æœç´¢æ‰¾åˆ° index ä½ç½®å…ƒç´ çš„å¾…æ’å…¥ä½ç½®
	 * å·²ç»æ’å¥½åºæ•°ç»„çš„åŒºé—´èŒƒå›´æ˜¯ [0, index)
	 * @param index
	 * @return
	 */
	private int search(int index) {
		int begin = 0;
		int end = index;
    //å½“begin == endæ—¶ï¼Œå³ä¸ºæ’å…¥çš„ä½ç½®
		while (begin < end) {
			int mid = (begin + end) >> 1;
			if (cmp(array[index], array[mid]) < 0) {
				end = mid;
			} else {
				begin = mid + 1;
			}
		}
		return begin;
	}
}
```



+ æ€§èƒ½å¯¹æ¯”

  ```java
  Integer[] array = Integers.random(10000, 1, 20000);
  testSorts(array, 
  				new InsertionSort1(),
  				new InsertionSort2(),
  				new InsertionSort3(),
  				new SelectionSort(), 
  				new HeapSort(), 
  				new BubbleSort3()
  				);
  				
  ã€HeapSortã€‘
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.004s(4ms) 	æ¯”è¾ƒï¼š23.54ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€InsertionSort3ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.069s(69ms) 	æ¯”è¾ƒï¼š11.90ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€SelectionSortã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.121s(121ms) 	æ¯”è¾ƒï¼š4999.50ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€InsertionSort1ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.131s(131ms) 	æ¯”è¾ƒï¼š2507.48ä¸‡	 äº¤æ¢ï¼š2506.48ä¸‡
  ------------------------------------------------------------------
  ã€InsertionSort2ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.155s(155ms) 	æ¯”è¾ƒï¼š2507.48ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€BubbleSort3ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.245s(245ms) 	æ¯”è¾ƒï¼š4992.17ä¸‡	 äº¤æ¢ï¼š2506.48ä¸‡
  ------------------------------------------------------------------
  ```

  + InsertionSort3æœ‰äº†æ˜æ˜¾æå‡

+ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨äº†äºŒåˆ†æœç´¢åï¼Œåªæ˜¯å‡å°‘äº†æ¯”è¾ƒæ¬¡æ•°ï¼Œä½†æ’å…¥æ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¾ç„¶æ˜¯ O(n<sup>2</sup>)

### å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰

+  1945å¹´ç”±çº¦ç¿°Â·å†¯Â·è¯ºä¼Šæ›¼ï¼ˆJohn von Neumannï¼‰é¦–æ¬¡æå‡º

+  æ‰§è¡Œæµç¨‹

  ![](./images/æ’åº27.png)

  1.  ä¸æ–­åœ°å°†å½“å‰åºåˆ—å¹³å‡åˆ†å‰²æˆ2ä¸ªå­åºåˆ—
     - ç›´åˆ°ä¸èƒ½å†åˆ†å‰²ï¼ˆåºåˆ—ä¸­åªå‰©1ä¸ªå…ƒç´ ï¼‰
  2. ä¸æ–­åœ°å°†2ä¸ªå­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—
     - ç›´åˆ°æœ€ç»ˆåªå‰©ä¸‹1ä¸ªæœ‰åºåºåˆ—

+ å¯¹è¾ƒå¤§çš„åºåˆ—è¿›è¡Œå½’å¹¶æ’åºï¼Œç›¸å½“äºå¯¹å®ƒçš„ä¸¤ä¸ªå­åºåˆ—è¿›è¡Œå½’å¹¶æ’åºï¼Œç„¶åç»å½’å¹¶æ’åºå¥½çš„å­åºåˆ—è¿›è¡Œmerge

### å½’å¹¶æ’åº â€“ divideå®ç°

![](./images/æ’åº28.png)

+ æ­¤æ—¶ä»£ç å®ç°

  ```java
  @SuppressWarnings("unchecked")
  public class MergeSort<T extends Comparable<T>> extends Sort<T> {
  
  	@Override
  	protected void sort() {
  		sort(0, array.length);
  	}
  	/**
  	 * å¯¹ [begin, end) èŒƒå›´çš„æ•°æ®è¿›è¡Œå½’å¹¶æ’åº
  	 */
  	private void sort(int begin, int end) {
  		if (end - begin < 2) return;
  		
  		int mid = (begin + end) >> 1;
  		sort(begin, mid);
  		sort(mid, end);
  		merge(begin, mid, end);
  	}
  	
  	/**
  	 * å°† [begin, mid) å’Œ [mid, end) èŒƒå›´çš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—
  	 */
  	private void merge(int begin, int mid, int end) {
  	}
  }
  
  ```

+ å› æ­¤æ­¤æ—¶çš„å…³é”®ç‚¹åœ¨äºï¼Œå¦‚ä½•å°†ä¸¤ä¸ªå­åºåˆ—è¿›è¡Œmerge

### å½’å¹¶æ’åº-merge

![](./images/æ’åº29.png)

+ ä¸‰ä¸ªåºåˆ—æ˜¯ç‹¬ç«‹çš„å†…å­˜
+ åˆ†åˆ«ä½¿ç”¨li,riæŒ‡å‘ä¸¤ä¸ªå­åºåˆ—è¦æ¯”è¾ƒçš„å…ƒç´ ,aiæŒ‡å‘è¦å­˜å‚¨çš„ä½ç½®
+ å°†è¾ƒå°çš„indexåŠ 1ï¼Œå¹¶å°†è¾ƒå°çš„å…ƒç´ å­˜å‚¨åœ¨å¤§æ•°ç»„ä¸­

### å½’å¹¶æ’åº- merge-ç»†èŠ‚

+ éœ€è¦ merge çš„ 2 ç»„åºåˆ—å­˜åœ¨äºåŒä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¹¶ä¸”æ˜¯æŒ¨åœ¨ä¸€èµ·çš„

  ![](./images/æ’åº30.png)

+ ä¸ºäº†æ›´å¥½åœ°å®Œæˆ merge æ“ä½œï¼Œæœ€å¥½å°†å…¶ä¸­ 1 ç»„åºåˆ—å¤‡ä»½å‡ºæ¥ï¼Œæ¯”å¦‚ [begin, mid)

  ![](./images/æ’åº31.png)

  - li == 0ï¼Œle == mid â€“ begin

  - ri == midï¼Œre == end

    ```
    1. leftArrayçš„é•¿åº¦æœ€å¤§ä¸ºæœ€åˆçš„æ•°ç»„çš„ä¸€åŠ
    2. å°†å·¦è¾¹çš„æ•°ç»„å¤‡ä»½å‡ºæ¥ï¼Œå› ä¸ºæ’å…¥éƒ½æ˜¯å¾€å·¦è¾¹æ’å…¥çš„
    3. leftArrayå’ŒrightArrayæœ¬èº«å°±æ˜¯æœ‰åºæ•°ç»„
    ```

    

### å½’å¹¶æ’åº â€“ mergeç»†èŠ‚ â€“ å·¦è¾¹å…ˆç»“æŸ

![](./images/æ’åº32.png)

+ å½“å·¦è¾¹æå‰ç»“æŸæ—¶ï¼Œå³è¾¹ä¸ç”¨åŠ¨

### å½’å¹¶æ’åº â€“ mergeç»†èŠ‚ â€“ å³è¾¹å…ˆç»“æŸ

![](./images/æ’åº33.png)

+ å½“å³è¾¹æå‰ç»“æŸæ—¶ï¼Œå°†å·¦è¾¹çš„å…ƒç´ ä¸€æ¬¡æ”¾åˆ°å³è¾¹å¯¹åº”ä½ç½®å³å¯



### å½’å¹¶æ’åº - å¼€è¾ŸleftArray

+ å¼€è¾ŸåŸå§‹æ•°ç»„çš„ä¸€åŠä½œä¸ºleftArray,è¿™æ ·å¯¹äºå­åºåˆ—è¿›è¡Œmergeæ—¶ï¼Œä¸éœ€è¦å†å¼€è¾ŸleftArrayï¼Œç›´æ¥å¤ç”¨è¿™ä¸ªleftArrayå³å¯

  ````java
  @SuppressWarnings("unchecked")
  public class MergeSort<T extends Comparable<T>> extends Sort<T> {
  	private T[] leftArray;
  
  	@Override
  	protected void sort() {
      //leftArrayçš„lengthä¸ºåŸæ•°ç»„çš„ä¸€åŠ
  		leftArray = (T[]) new Comparable[array.length >> 1];
  		sort(0, array.length);
  	}
  }
  ````

### å½’å¹¶æ’åº - mergeçš„å®ç°

![](./images/æ’åº34.png)

```java
package com.mj.sort.cmp;

import com.mj.sort.Sort;

@SuppressWarnings("unchecked")
public class MergeSort<T extends Comparable<T>> extends Sort<T> {
	private T[] leftArray;

	@Override
	protected void sort() {
		leftArray = (T[]) new Comparable[array.length >> 1];
		sort(0, array.length);
	}
	
	// T(n) = T(n/2) + T(n/2) + O(n)
	/**
	 * å¯¹ [begin, end) èŒƒå›´çš„æ•°æ®è¿›è¡Œå½’å¹¶æ’åº
	 */
	private void sort(int begin, int end) {
		if (end - begin < 2) return;
		
		int mid = (begin + end) >> 1;
		sort(begin, mid);
		sort(mid, end);
		merge(begin, mid, end);
	}
	
	/**
	 * å°† [begin, mid) å’Œ [mid, end) èŒƒå›´çš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—
	 */
	private void merge(int begin, int mid, int end) {
    //liæ˜¯æŒ‡å‘leftArray, leæ˜¯æŒ‡å½“å‰leftArrayçš„æœ‰æ•ˆå…ƒç´ çš„é•¿åº¦
		int li = 0, le = mid - begin;
    //riæŒ‡å‘çš„æ˜¯å¤§æ•°ç»„ä¸­çš„ä½ç½® 
		int ri = mid, re = end;
    //aiæŒ‡å‘å¤§æ•°ç»„ä¸­å°†è¦å­˜å‚¨çš„ä½ç½®
		int ai = begin;
		
		//å…ƒç´ éƒ½æ˜¯ä½äºæ•´ä¸ªå¤§æ•°ç»„çš„,
    //ä»å¤§æ•°ç»„ä¸­å–å‡ºå·¦è¾¹çš„å…ƒç´ è¿›è¡Œå¤‡ä»½ï¼Œ å·¦è¾¹çš„å…ƒç´ åœ¨å¤§æ•°ç»„ä¸­çš„ä½ç½®æ˜¯ [begin mid)
		for (int i = li; i < le; i++) {
			leftArray[i] = array[begin + i];
		}
		// å¦‚æœå·¦è¾¹è¿˜æ²¡æœ‰ç»“æŸ
    // å¦‚æœå·¦è¾¹å…ˆç»“æŸï¼Œåé¢ä½ç½®ä¸ç”¨åŠ¨äº†
		while (li < le) { 
			if (ri < re && cmp(array[ri], leftArray[li]) < 0) {
        //å³è¾¹æœªç»“æŸæ—¶ï¼Œ
        //å¦‚æœarray[ri]è¾ƒå°æ—¶ï¼Œå°†array[ri]çš„å€¼æ”¾åˆ°array[ai]ä½ç½®
				array[ai++] = array[ri++];
        //array[ai] = array[ri];
        //ai++
        //ri++
			} else {
        //æƒ…å†µ1. å¦‚æœleftArray[li]è¾ƒå°æ—¶ï¼Œå°†leftArray[li]çš„å€¼æ”¾åˆ°array[ai]ä½ç½®
        //      å½“leftArray[li] == array[ri], leftArray[li]ä¸ºè¾ƒå°å€¼ï¼Œè¿™å°±ä¿è¯äº†ç¨³å®šæ€§
        //æƒ…å†µ2. å³è¾¹å…ˆç»“æŸæ—¶ï¼Œå°†å·¦è¾¹å¯¹åº”èµ‹å€¼åˆ°å³è¾¹å³å¯
				array[ai++] = leftArray[li++];
        //array[ai] = leftArray[li];
        //ai++
        //li++
			}
		}
	}
}
```

### å½’å¹¶æ’åº - æ€§èƒ½å¯¹æ¯”

```java
Integer[] array = Integers.random(10000, 1, 20000);
testSorts(array, 
				new MergeSort(),
				new InsertionSort1(),
				new InsertionSort2(),
				new InsertionSort3(),
				new SelectionSort(), 
				new HeapSort(), 
				new BubbleSort3()
				);

ã€MergeSortã€‘
ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.005s(5ms) 	æ¯”è¾ƒï¼š12.05ä¸‡	 äº¤æ¢ï¼š0
------------------------------------------------------------------
ã€HeapSortã€‘
ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.005s(5ms) 	æ¯”è¾ƒï¼š23.53ä¸‡	 äº¤æ¢ï¼š9999
------------------------------------------------------------------
ã€InsertionSort3ã€‘
ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.063s(63ms) 	æ¯”è¾ƒï¼š11.90ä¸‡	 äº¤æ¢ï¼š0
------------------------------------------------------------------
ã€SelectionSortã€‘
ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.094s(94ms) 	æ¯”è¾ƒï¼š4999.50ä¸‡	 äº¤æ¢ï¼š9999
------------------------------------------------------------------
ã€InsertionSort2ã€‘
ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.162s(162ms) 	æ¯”è¾ƒï¼š2502.93ä¸‡	 äº¤æ¢ï¼š0
------------------------------------------------------------------
ã€InsertionSort1ã€‘
ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.188s(188ms) 	æ¯”è¾ƒï¼š2502.93ä¸‡	 äº¤æ¢ï¼š2501.93ä¸‡
------------------------------------------------------------------
ã€BubbleSort3ã€‘
ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.291s(291ms) 	æ¯”è¾ƒï¼š4997.78ä¸‡	 äº¤æ¢ï¼š2501.93ä¸‡
------------------------------------------------------------------
```

### å½’å¹¶æ’åº â€“ å¤æ‚åº¦åˆ†æ

+ å½’å¹¶æ’åºèŠ±è´¹çš„æ—¶é—´
  - T(n) = 2 âˆ— T( n/2 )+ O(n)
  - T(1) =  O(1)
  - T(n)/n =  T( n/2 )/(n/2)+ O(1)
+ ä»¤ S(n)= T(n) /n
  - S(1) = O(1)
  - S(n) = S(n/2) +  O(1) = S(n/4) + O(2) = S(n/8) + O(3) = S(n/2<sup>k</sup>) + O(k) = S(1) + O(logn) = O(logn)
  - T(n) = n *  S(n) = O(nlogn)

+ ç”±äºå½’å¹¶æ’åºæ€»æ˜¯å¹³å‡åˆ†å‰²å­åºåˆ—ï¼Œæ‰€ä»¥æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(nlogn) ï¼Œå±äºç¨³å®šæ’åº

+ ä»ä»£ç ä¸­ä¸éš¾çœ‹å‡ºï¼šå½’å¹¶æ’åºçš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(n/2 + logn) = O(n)
  + n/2 ç”¨äºä¸´æ—¶å­˜æ”¾å·¦ä¾§æ•°ç»„ï¼Œlognæ˜¯å› ä¸ºé€’å½’è°ƒç”¨äº†lognæ¬¡ï¼Œå¼€è¾Ÿäº†lognä¸ªå‡½æ•°æ ˆç©ºé—´

### å¸¸è§çš„é€’æ¨å¼ä¸å¤æ‚åº¦

![](./images/æ’åº35.png)

### å½’å¹¶æ’åº-ä½œä¸š

+ åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„: https://leetcode-cn.com/problems/merge-sorted-array/
+  åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨: https://leetcode-cn.com/problems/merge-two-sorted-lists/comments/
+  åˆå¹¶Kä¸ªæœ‰åºé“¾è¡¨: https://leetcode-cn.com/problems/merge-k-sorted-lists/
+ è§£é¢˜æ•™ç¨‹: https://ke.qq.com/course/436549



### å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰

+ 1960å¹´ç”±**æŸ¥å°”æ–¯Â·å®‰ä¸œå°¼Â·ç†æŸ¥å¾·Â·éœå°”ï¼ˆCharles Antony Richard Hoareï¼Œç¼©å†™ä¸ºC. A. R. Hoareï¼‰**æå‡º
  - æ˜µç§°ä¸º**ä¸œå°¼Â·éœå°”ï¼ˆTony Hoareï¼‰**

### å¿«é€Ÿæ’åº â€“ æ‰§è¡Œæµç¨‹

![](./images/æ’åº36.png)

+ æ‰§è¡Œæµç¨‹
  - â‘  ä»åºåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªè½´ç‚¹å…ƒç´ ï¼ˆpivotï¼‰
    - å‡è®¾æ¯æ¬¡é€‰æ‹© 0 ä½ç½®çš„å…ƒç´ ä¸ºè½´ç‚¹å…ƒç´ 
  - â‘¡ åˆ©ç”¨ pivot å°†åºåˆ—åˆ†å‰²æˆ 2 ä¸ªå­åºåˆ—
    - å°†å°äº pivot çš„å…ƒç´ æ”¾åœ¨pivotå‰é¢ï¼ˆå·¦ä¾§ï¼‰
    - å°†å¤§äº pivot çš„å…ƒç´ æ”¾åœ¨pivotåé¢ï¼ˆå³ä¾§ï¼‰
    - ç­‰äºpivotçš„å…ƒç´ æ”¾å“ªè¾¹éƒ½å¯ä»¥
  - â‘¢ å¯¹å­åºåˆ—è¿›è¡Œ â‘  â‘¡ æ“ä½œ
    - ç›´åˆ°ä¸èƒ½å†åˆ†å‰²ï¼ˆå­åºåˆ—ä¸­åªå‰©ä¸‹1ä¸ªå…ƒç´ ï¼‰

+ å¿«é€Ÿæ’åºçš„æœ¬è´¨
  - é€æ¸å°†æ¯ä¸€ä¸ªå…ƒç´ éƒ½è½¬æ¢æˆè½´ç‚¹å…ƒç´ 
  - å½“éƒ½è½¬æ¢æˆè½´ç‚¹å…ƒç´ ä¹‹åï¼Œå°±æ’å¥½åºäº†

### å¿«é€Ÿæ’åº â€“ è½´ç‚¹æ„é€ 

![](./images/æ’åº37.png)

```
ä»endæ‰«æï¼Œå¦‚æœendå…ƒç´ >è½´ç‚¹å…ƒç´ ï¼Œåˆ™end-1,æ–¹å‘ä¸å˜
ä»endæ‰«æï¼Œå¦‚æœendå…ƒç´ <=è½´ç‚¹å…ƒç´ ï¼Œåˆ™å°†endå…ƒç´ è¦†ç›–æ‰beginå…ƒç´ ï¼Œbegin++ï¼Œä¸‹æ¬¡ä»beginæ‰«æ

ä»beginæ‰«æï¼Œå¦‚æœbeginå…ƒç´ <è½´ç‚¹å…ƒç´ ï¼Œåˆ™bgin+1,æ–¹å‘ä¸å˜
ä»beginæ‰«æï¼Œå¦‚æœbeginå…ƒç´ >=è½´ç‚¹å…ƒç´ ï¼Œåˆ™å°†beginå…ƒç´ è¦†ç›–æ‰endå…ƒç´ ï¼Œend-1ï¼Œä¸‹æ¬¡ä»endæ‰«æ
```

+ ä»£ç å®ç°

  ```java
  public class QuickSort<T extends Comparable<T>> extends Sort<T> {
  
  	@Override
  	protected void sort() {
  		sort(0, array.length);
  	}
  
  	/**
  	 * å¯¹ [begin, end) èŒƒå›´çš„å…ƒç´ è¿›è¡Œå¿«é€Ÿæ’åº
  	 * @param begin
  	 * @param end
  	 */
  	private void sort(int begin, int end) { 
  		if (end - begin < 2) return;
  		//T(n) = 2T(n/2)+ O(n)= O(nlogn)
  		// ç¡®å®šè½´ç‚¹ä½ç½® 
  		int mid = pivotIndex(begin, end);
  		// å¯¹å­åºåˆ—è¿›è¡Œå¿«é€Ÿæ’åº
  		sort(begin, mid); 
  		sort(mid + 1, end); 
  	} 
  	/**
  	 * æ„é€ å‡º [begin, end) èŒƒå›´çš„è½´ç‚¹å…ƒç´  O(n),æŠŠå…ƒç´ æ‰«æä¸€éå³å¯æ¯”è¾ƒå‡º
  	 * @return è½´ç‚¹å…ƒç´ çš„æœ€ç»ˆä½ç½®
  	 */
  	private int pivotIndex(int begin, int end) {
  		// éšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´ è·Ÿbeginä½ç½®è¿›è¡Œäº¤æ¢
  		swap(begin, begin + (int)(Math.random() * (end - begin)));
  		// å¤‡ä»½beginä½ç½®çš„å…ƒç´ 
  		T pivot = array[begin];
  		// endæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ 
  		end--;
  		
  		while (begin < end) {
        //ä¸¤ä¸ªwhileå¾ªç¯è§£å†³,æ‰«ææ–¹å‘å˜åŒ–çš„é—®é¢˜
  			while (begin < end) {
  				if (cmp(pivot, array[end]) < 0) { // å³è¾¹å…ƒç´  > è½´ç‚¹å…ƒç´ 
  					end--;
  				} else { // å³è¾¹å…ƒç´  <= è½´ç‚¹å…ƒç´ 
  					array[begin++] = array[end];
  					break;
  				}
  			}
        
  			while (begin < end) {
  				if (cmp(pivot, array[begin]) > 0) { // å·¦è¾¹å…ƒç´  < è½´ç‚¹å…ƒç´ 
  					begin++;
  				} else { // å·¦è¾¹å…ƒç´  >= è½´ç‚¹å…ƒç´ 
  					array[end--] = array[begin];
  					break;
  				}
  			}
  		}
  		// å°†è½´ç‚¹å…ƒç´ æ”¾å…¥æœ€ç»ˆçš„ä½ç½®
  		array[begin] = pivot;
  		// è¿”å›è½´ç‚¹å…ƒç´ çš„ä½ç½®
  		return begin;
  	}
  }
  
  ```

+ æ€§èƒ½å¯¹æ¯”

  ```java
  Integer[] array = Integers.random(10000, 1, 20000);
  testSorts(array, 
  				new QuickSort(),
  				new MergeSort(),
  				new InsertionSort1(),
  				new InsertionSort2(),
  				new InsertionSort3(),
  				new SelectionSort(), 
  				new HeapSort(), 
  				new BubbleSort3()
  				);
  ã€HeapSortã€‘
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.005s(5ms) 	æ¯”è¾ƒï¼š23.55ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€MergeSortã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.006s(6ms) 	æ¯”è¾ƒï¼š12.04ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€QuickSortã€‘ å¿«æ’çš„æ€§èƒ½è¿˜æ˜¯ä¸é”™çš„
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.007s(7ms) 	æ¯”è¾ƒï¼š16.24ä¸‡	 äº¤æ¢ï¼š6515
  ------------------------------------------------------------------
  ã€InsertionSort3ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.058s(58ms) 	æ¯”è¾ƒï¼š11.90ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€SelectionSortã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.094s(94ms) 	æ¯”è¾ƒï¼š4999.50ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€InsertionSort2ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.144s(144ms) 	æ¯”è¾ƒï¼š2512.84ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€InsertionSort1ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.209s(209ms) 	æ¯”è¾ƒï¼š2512.84ä¸‡	 äº¤æ¢ï¼š2511.84ä¸‡
  ------------------------------------------------------------------
  ã€BubbleSort3ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.253s(253ms) 	æ¯”è¾ƒï¼š4996.08ä¸‡	 äº¤æ¢ï¼š2511.84ä¸‡
  ------------------------------------------------------------------
  ```

  

### å¿«é€Ÿæ’åº â€“ æ—¶é—´å¤æ‚åº¦

+ åœ¨è½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æ¯”è¾ƒå‡åŒ€çš„æƒ…å†µä¸‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€å¥½çš„æƒ…å†µ
  - T(n) = 2 âˆ— T (n/2) + O n = O(nlogn)

+ å¦‚æœè½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æåº¦ä¸å‡åŒ€ï¼Œæœ€åæƒ…å†µ

  - T(n) = T( n - ) + O(n) = O(n<sup>2</sup>)

  ![](./images/æ’åº38.png)

+ ä¸ºäº†é™ä½æœ€åæƒ…å†µçš„å‡ºç°æ¦‚ç‡ï¼Œä¸€èˆ¬é‡‡å–çš„åšæ³•æ˜¯
  - éšæœºé€‰æ‹©è½´ç‚¹å…ƒç´ 
+ æœ€å¥½ã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)
+ æœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)
+ ç”±äºé€’å½’è°ƒç”¨çš„ç¼˜æ•…ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(logn)
+ å±äºä¸ç¨³å®šæ’åº

### å¿«é€Ÿæ’åº â€“ ä¸è½´ç‚¹ç›¸ç­‰çš„å…ƒç´ 

![](./images/æ’åº39.png)

+ å¦‚æœåºåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸è½´ç‚¹å…ƒç´ ç›¸ç­‰ï¼Œåˆ©ç”¨ç›®å‰çš„ç®—æ³•å®ç°ï¼Œè½´ç‚¹å…ƒç´ å¯ä»¥å°†åºåˆ—åˆ†å‰²æˆ 2 ä¸ªå‡åŒ€çš„å­åºåˆ—

+ æ€è€ƒï¼šcmp ä½ç½®çš„åˆ¤æ–­åˆ†åˆ«æ”¹ä¸º â‰¤ã€â‰¥ ä¼šèµ·åˆ°ä»€ä¹ˆæ•ˆæœï¼Ÿ

  ![](./images/æ’åº40.png)

  ![](./images/æ’åº41.png)

+ è½´ç‚¹å…ƒç´ åˆ†å‰²å‡ºæ¥çš„å­åºåˆ—æåº¦ä¸å‡åŒ€
  - å¯¼è‡´å‡ºç°æœ€åæ—¶é—´å¤æ‚åº¦ O(n<sup>2</sup>)



### å¸Œå°”æ’åºï¼ˆShell Sortï¼‰

+ 1959å¹´ç”±å”çº³å¾·Â·å¸Œå°”ï¼ˆDonald Shellï¼‰æå‡º
+ å¸Œå°”æ’åºæŠŠåºåˆ—çœ‹ä½œæ˜¯ä¸€ä¸ª**çŸ©é˜µ**ï¼Œåˆ†æˆ ğ‘š åˆ—ï¼Œé€åˆ—è¿›è¡Œæ’åº
  - ğ‘š ä»æŸä¸ªæ•´æ•°é€æ¸å‡ä¸º1
  - å½“ ğ‘š ä¸º1æ—¶ï¼Œæ•´ä¸ªåºåˆ—å°†å®Œå…¨æœ‰åº
+  å› æ­¤ï¼Œå¸Œå°”æ’åºä¹Ÿè¢«ç§°ä¸º**é€’å‡å¢é‡æ’åºï¼ˆDiminishing Increment Sortï¼‰**
+ çŸ©é˜µçš„åˆ—æ•°å–å†³äºæ­¥é•¿åºåˆ—ï¼ˆstep sequenceï¼‰
  -  æ¯”å¦‚ï¼Œå¦‚æœæ­¥é•¿åºåˆ—ä¸º{1,5,19,41,109,...}ï¼Œå°±ä»£è¡¨ä¾æ¬¡åˆ†æˆ109åˆ—ã€41åˆ—ã€19åˆ—ã€5åˆ—ã€1åˆ—è¿›è¡Œæ’åº
  - ä¸åŒçš„æ­¥é•¿åºåˆ—ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿä¸åŒ

### å¸Œå°”æ’åº â€“ å®ä¾‹

+ å¸Œå°”æœ¬äººç»™å‡ºçš„æ­¥é•¿åºåˆ—æ˜¯ ğ‘›/2<sup>ğ‘˜</sup>ï¼Œæ¯”å¦‚ ğ‘› ä¸º16æ—¶ï¼Œæ­¥é•¿åºåˆ—æ˜¯{1, 2, 4, 8}

  ![](./images/æ’åº42.png)

  - åˆ†æˆ8åˆ—è¿›è¡Œæ’åº

    ![](./images/æ’åº43.png)

  - åˆ†æˆ4åˆ—è¿›è¡Œæ’åº

    ![](./images/æ’åº44.png)

  - åˆ†æˆ2åˆ—è¿›è¡Œæ’åº

    ![](./images/æ’åº45.png)

  - åˆ†æˆ1åˆ—è¿›è¡Œæ’åº

    ![](./images/æ’åº46.png)

  - ä¸éš¾çœ‹å‡ºæ¥ï¼Œä»8åˆ— å˜ä¸º 1åˆ—çš„è¿‡ç¨‹ä¸­ï¼Œé€†åºå¯¹çš„æ•°é‡åœ¨é€æ¸å‡å°‘

    - å› æ­¤å¸Œå°”æ’åºåº•å±‚ä¸€èˆ¬ä½¿ç”¨æ’å…¥æ’åºå¯¹æ¯ä¸€åˆ—è¿›è¡Œæ’åºï¼Œä¹Ÿå¾ˆå¤šèµ„æ–™è®¤ä¸ºå¸Œå°”æ’åºæ˜¯æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆ

+ å‡è®¾æœ‰11ä¸ªå…ƒç´ ï¼Œæ­¥é•¿åºåˆ—æ˜¯{1, 2, 5}

  ![](./images/æ’åº47.png)

  + å‡è®¾å…ƒç´ åœ¨ç¬¬ col åˆ—ã€ç¬¬ row è¡Œï¼Œæ­¥é•¿ï¼ˆæ€»åˆ—æ•°ï¼‰æ˜¯ step
    - é‚£ä¹ˆè¿™ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•æ˜¯ col + row * step
    - æ¯”å¦‚ 9 åœ¨æ’åºå‰æ˜¯ç¬¬ 2 åˆ—ã€ç¬¬ 0 è¡Œï¼Œé‚£ä¹ˆå®ƒæ’åºå‰çš„ç´¢å¼•æ˜¯ 2 + 0 * 5 = 2
    - æ¯”å¦‚ 4 åœ¨æ’åºå‰æ˜¯ç¬¬ 2 åˆ—ã€ç¬¬ 1 è¡Œï¼Œé‚£ä¹ˆå®ƒæ’åºå‰çš„ç´¢å¼•æ˜¯ 2 + 1 * 5 = 7

###  å¸Œå°”æ’åº â€“ æ­¥é•¿åºåˆ—

+ å¸Œå°”æœ¬äººç»™å‡ºçš„æ­¥é•¿åºåˆ—ï¼Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯ O(n<font color=red><sup>2</sup></font>)

  ```java
  private List<Integer> shellStepSequence() {
  		List<Integer> stepSequence = new ArrayList<>();
  		int step = array.length;
  		while ((step >>= 1) > 0) {
  			stepSequence.add(step);
  		}
  		return stepSequence;
  	}
  ```

+ ç›®å‰å·²çŸ¥çš„æœ€å¥½çš„æ­¥é•¿åºåˆ—ï¼Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯ O(n<font color=red><sup>4/3</sup></font>) ï¼Œ1986å¹´ç”±<font color=red>Robert Sedgewick</font>æå‡º

  ![](./images/æ’åº48.png)

  ```java
  private List<Integer> sedgewickStepSequence() {
  		List<Integer> stepSequence = new LinkedList<>();
  		int k = 0, step = 0;
  		while (true) {
  			if (k % 2 == 0) {
  				int pow = (int) Math.pow(2, k >> 1);
  				step = 1 + 9 * (pow * pow - pow);
  			} else {
  				int pow1 = (int) Math.pow(2, (k - 1) >> 1);
  				int pow2 = (int) Math.pow(2, (k + 1) >> 1);
  				step = 1 + 8 * pow1 * pow2 - 6 * pow2;
  			}
  			if (step >= array.length) break;
  			stepSequence.add(0, step);
  			k++;
  		}
  		return stepSequence;
  	}
  ```

### å¸Œå°”æ’åº â€“ å®ç°

+ æœ€å¥½æƒ…å†µæ˜¯æ­¥é•¿åºåˆ—åªæœ‰1ï¼Œä¸”åºåˆ—å‡ ä¹æœ‰åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)

+ ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ï¼Œå±äºä¸ç¨³å®šæ’åº

  ![](./images/æ’åº49.png)

+ ä»£ç å®ç°

  ```java
  public class ShellSort<T extends Comparable<T>> extends Sort<T> {
  
  	@Override
  	protected void sort() {
  		List<Integer> stepSequence = sedgewickStepSequence();
  		for (Integer step : stepSequence) {
  			sort(step);
  		}
  	}
  	
  	/**
  	 * åˆ†æˆstepåˆ—è¿›è¡Œæ’åº
  	 */
  	private void sort(int step) {
  		// col : ç¬¬å‡ åˆ—ï¼Œcolumnçš„ç®€ç§°
  		for (int col = 0; col < step; col++) { // å¯¹ç¬¬colåˆ—è¿›è¡Œæ’åº
  			// colã€col+stepã€col+2*stepã€col+3*step
  			for (int begin = col + step; begin < array.length; begin += step) {
  				int cur = begin;
          //å¯¹åˆ—è¿›è¡Œæ’å…¥æ’åº
          //beginæ˜¯ä»åˆ—çš„ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹çš„
  				while (cur > col && cmp(cur, cur - step) < 0) {
  					swap(cur, cur - step);
  					cur -= step;
  				}
  			}
  		}
  	}
  	
  	private List<Integer> shellStepSequence() {
  		List<Integer> stepSequence = new ArrayList<>();
  		int step = array.length;
  		while ((step >>= 1) > 0) {
  			stepSequence.add(step);
  		}
  		return stepSequence;
  	}
  	
  	private List<Integer> sedgewickStepSequence() {
  		List<Integer> stepSequence = new LinkedList<>();
  		int k = 0, step = 0;
  		while (true) {
  			if (k % 2 == 0) {
  				int pow = (int) Math.pow(2, k >> 1);
  				step = 1 + 9 * (pow * pow - pow);
  			} else {
  				int pow1 = (int) Math.pow(2, (k - 1) >> 1);
  				int pow2 = (int) Math.pow(2, (k + 1) >> 1);
  				step = 1 + 8 * pow1 * pow2 - 6 * pow2;
  			}
  			if (step >= array.length) break;
  			stepSequence.add(0, step);
  			k++;
  		}
  		return stepSequence;
  	}
  }
  
  ```

+ æ€§èƒ½å¯¹æ¯”

  ```java
  Integer[] array = Integers.random(10000, 1, 20000);
  testSorts(array, 
  				new ShellSort(),
  				new QuickSort(),
  				new MergeSort(),
  				new InsertionSort1(),
  				new InsertionSort2(),
  				new InsertionSort3(),
  				new SelectionSort(), 
  				new HeapSort(), 
  				new BubbleSort3()
  				);
  
  ã€MergeSortã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.004s(4ms) 	æ¯”è¾ƒï¼š12.04ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€HeapSortã€‘
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.005s(5ms) 	æ¯”è¾ƒï¼š23.55ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€QuickSortã€‘
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.006s(6ms) 	æ¯”è¾ƒï¼š15.53ä¸‡	 äº¤æ¢ï¼š6472
  ------------------------------------------------------------------
  ã€ShellSortã€‘
  ç¨³å®šæ€§ï¼šfalse 	è€—æ—¶ï¼š0.01s(10ms) 	æ¯”è¾ƒï¼š19.44ä¸‡	 äº¤æ¢ï¼š10.62ä¸‡
  ------------------------------------------------------------------
  ã€InsertionSort3ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.064s(64ms) 	æ¯”è¾ƒï¼š11.90ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€SelectionSortã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.111s(111ms) 	æ¯”è¾ƒï¼š4999.50ä¸‡	 äº¤æ¢ï¼š9999
  ------------------------------------------------------------------
  ã€InsertionSort1ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.164s(164ms) 	æ¯”è¾ƒï¼š2492.08ä¸‡	 äº¤æ¢ï¼š2491.08ä¸‡
  ------------------------------------------------------------------
  ã€InsertionSort2ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.174s(174ms) 	æ¯”è¾ƒï¼š2492.08ä¸‡	 äº¤æ¢ï¼š0
  ------------------------------------------------------------------
  ã€BubbleSort3ã€‘
  ç¨³å®šæ€§ï¼štrue 	è€—æ—¶ï¼š0.264s(264ms) 	æ¯”è¾ƒï¼š4996.81ä¸‡	 äº¤æ¢ï¼š2491.08ä¸‡
  ------------------------------------------------------------------
  
  ```

### è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰

+ ä¹‹å‰å­¦ä¹ çš„å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å½’å¹¶ã€å¿«é€Ÿã€å¸Œå°”ã€å †æ’åºï¼Œéƒ½æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åº
  - å¹³å‡æ—¶é—´å¤æ‚åº¦ç›®å‰æœ€ä½æ˜¯ O(nlogn)
+ è®¡æ•°æ’åºã€æ¡¶æ’åºã€åŸºæ•°æ’åºï¼Œéƒ½ä¸æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åº
  - å®ƒä»¬æ˜¯å…¸å‹çš„ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œåœ¨æŸäº›æ—¶å€™ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å¯ä»¥æ¯” O(nlogn)æ›´ä½
+ è®¡æ•°æ’åºäº1954å¹´ç”±**Harold H. Seward**æå‡ºï¼Œé€‚åˆå¯¹ä¸€å®šèŒƒå›´å†…çš„æ•´æ•°è¿›è¡Œæ’åº
+ è®¡æ•°æ’åºçš„æ ¸å¿ƒæ€æƒ³
  - ç»Ÿè®¡æ¯ä¸ªæ•´æ•°åœ¨åºåˆ—ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œè¿›è€Œæ¨å¯¼å‡ºæ¯ä¸ªæ•´æ•°åœ¨æœ‰åºåºåˆ—ä¸­çš„ç´¢å¼•

 ### è®¡æ•°æ’åº â€“ æœ€ç®€å•çš„å®ç°

![](./images/æ’åº50.png)

+ ç´¢å¼•ä¸ºåŸæ•°ç»„ä¸­çš„å…ƒç´ å€¼ï¼Œç´¢å¼•å¯¹åº”çš„å€¼æ˜¯åŸæ•°ç»„ä¸­çš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°

+ ä»£ç å®ç°

  ```java
  protected void sort0() {
  		// æ‰¾å‡ºæœ€å¤§å€¼
  		int max = array[0];
  		for (int i = 1; i < array.length; i++) {
  			if (array[i] > max) {
  				max = array[i];
  			}
  		} // O(n)
  		
  		// å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
  		int[] counts = new int[1 + max];
  		// ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
  		for (int i = 0; i < array.length; i++) {
  			counts[array[i]]++;
  		} // O(n)
  		
  		// æ ¹æ®æ•´æ•°çš„å‡ºç°æ¬¡æ•°ï¼Œå¯¹æ•´æ•°è¿›è¡Œæ’åº
  		int index = 0;
  		for (int i = 0; i < counts.length; i++) {
  			while (counts[i]-- > 0) {
  				array[index++] = i;
  			}
  		} // O(n)
  	}	
  ```

+ è¿™ä¸ªç‰ˆæœ¬çš„å®ç°å­˜åœ¨ä»¥ä¸‹é—®é¢˜

  - æ— æ³•å¯¹è´Ÿæ•´æ•°è¿›è¡Œæ’åº
  - æå…¶æµªè´¹å†…å­˜ç©ºé—´
  - æ˜¯ä¸ªä¸ç¨³å®šçš„æ’åº
  - .....



